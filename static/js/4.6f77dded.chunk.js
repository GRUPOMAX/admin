(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{766:function(e,a,t){},771:function(e,a,t){"use strict";var n=t(6),c=t(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},o=t(14),l=function(e,a){return c.createElement(o.a,Object(n.a)({},e,{ref:a,icon:r}))},s=c.forwardRef(l);a.a=s},784:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(230),o=t(163),l=t(295),s=t(200),i=t(287),d=t(193),m=t(151),u=t(56),g=t(6),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},h=t(14),p=function(e,a){return n.createElement(h.a,Object(g.a)({},e,{ref:a,icon:E}))};var b=n.forwardRef(p),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M380 704h264c4.4 0 8-3.6 8-8v-84c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v36H428v-36c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v84c0 4.4 3.6 8 8 8zm340-123a40 40 0 1080 0 40 40 0 10-80 0zm239-167.6L935.3 372a8 8 0 00-10.9-2.9l-50.7 29.6-78.3-216.2a63.9 63.9 0 00-60.9-44.4H301.2c-34.7 0-65.5 22.4-76.2 55.5l-74.6 205.2-50.8-29.6a8 8 0 00-10.9 2.9L65 413.4c-2.2 3.8-.9 8.6 2.9 10.8l60.4 35.2-14.5 40c-1.2 3.2-1.8 6.6-1.8 10v348.2c0 15.7 11.8 28.4 26.3 28.4h67.6c12.3 0 23-9.3 25.6-22.3l7.7-37.7h545.6l7.7 37.7c2.7 13 13.3 22.3 25.6 22.3h67.6c14.5 0 26.3-12.7 26.3-28.4V509.4c0-3.4-.6-6.8-1.8-10l-14.5-40 60.3-35.2a8 8 0 003-10.8zM840 517v237H184V517l15.6-43h624.8l15.6 43zM292.7 218.1l.5-1.3.4-1.3c1.1-3.3 4.1-5.5 7.6-5.5h427.6l75.4 208H220l72.7-199.9zM224 581a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"car",theme:"outlined"},y=function(e,a){return n.createElement(h.a,Object(g.a)({},e,{ref:a,icon:S}))};var j=n.forwardRef(y),x=t(771),f=t(289);t(766);const{TabPane:v}=r.a,{Option:O}=o.a;a.default=(()=>{const[e,a]=Object(n.useState)([]),[t,g]=Object(n.useState)([]),[E,h]=Object(n.useState)([]),[p,S]=Object(n.useState)([]),[y,w]=Object(n.useState)([]),[_,z]=Object(n.useState)([]),[A,k]=Object(n.useState)([]),[C,I]=Object(n.useState)({}),[T,D]=Object(n.useState)(!0),[R,F]=Object(n.useState)(!1),[K,M]=Object(n.useState)(1),[L]=Object(n.useState)(15),[N,P]=Object(n.useState)(""),[H,B]=Object(n.useState)(""),[J,V]=Object(n.useState)(""),[$,q]=Object(n.useState)(localStorage.getItem("defaultSubject")||"Instala\xe7\xe3o"),[G,Q]=Object(n.useState)($),[U,W]=Object(n.useState)({status:"",technician:"",subject:$}),[X,Y]=Object(n.useState)([]),[Z,ee]=Object(n.useState)([]),[ae,te]=Object(n.useState)(!1),[ne,ce]=Object(n.useState)(Number(localStorage.getItem("timeRemaining"))||0),[re,oe]=Object(n.useState)(!1),[le,se]=Object(n.useState)(!1),[ie,de]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{try{const[t,n,c,r,o,s,i]=await Promise.all([f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Agendadas.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Em_Execucao.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Em_Aberto.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Em_Analise.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Encaminhadas.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Reagendadas.json"),f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Em_Deslocamento.json")]);a(t.data),g(n.data),h(c.data),S(r.data),w(o.data),z(s.data),k(i.data),oe(n.data.length>0),se(i.data.length>0);const d=[...new Set([...t.data,...n.data,...c.data,...r.data,...o.data,...s.data,...i.data].map(e=>e.tecnico))],m=[...new Set([...t.data,...n.data,...c.data,...r.data,...o.data,...s.data,...i.data].map(e=>e.assunto))];Y(d),ee(m),D(!1)}catch(e){l.a.error("Erro ao carregar os dados das ordens de servi\xe7o."),D(!1)}})()},[]),Object(n.useEffect)(()=>{if(ae&&ne>0){const e=setInterval(()=>{ce(a=>{const t=a-1;return localStorage.setItem("timeRemaining",t),t<=0&&(clearInterval(e),te(!1),localStorage.removeItem("timeRemaining")),t})},1e3);return()=>clearInterval(e)}},[ae,ne]);const me=async e=>{try{const t=await fetch("https://api.comand.nexusnerds.com.br/executar-comando",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comando:e})});if(!t.ok)throw new Error("Erro ao executar o comando");const n=await t.json();console.log(n)}catch(a){throw console.error(`Erro de execu\xe7\xe3o: ${a.message}`),a}},ue=e=>{M(e)},ge=e=>{const a=e.filter(e=>(!U.status||e.status===U.status)&&(!U.technician||e.tecnico===U.technician)&&(!U.subject||e.assunto===U.subject)),t=(K-1)*L,n=t+L;return a.slice(t,n)},Ee=[{title:"T\xe9cnico",dataIndex:"tecnico",key:"tecnico"},{title:"Cliente",dataIndex:"razao",key:"razao"},{title:"Endere\xe7o",dataIndex:"endereco",key:"endereco"},{title:"Telefone",dataIndex:"telefone_celular",key:"telefone_celular"},{title:"Data Abertura",dataIndex:"data_abertura",key:"data_abertura"},{title:"Data Final",dataIndex:"data_final",key:"data_final"},{title:"Assunto",dataIndex:"assunto",key:"assunto"}];return c.a.createElement("div",{className:"ordens-servico-dashboard-container"},c.a.createElement("h2",null,"Dashboard - Ordens de Servi\xe7o"),c.a.createElement("div",{className:"filter-container"},c.a.createElement(o.a,{placeholder:"Filtrar por status",onChange:e=>B(e),style:{width:200,marginRight:10}},c.a.createElement(O,{value:""},"Todos os status"),c.a.createElement(O,{value:"Agendadas"},"Agendadas"),c.a.createElement(O,{value:"EmExecucao"},"Em Execu\xe7\xe3o"),c.a.createElement(O,{value:"EmAberto"},"Em Aberto"),c.a.createElement(O,{value:"EmAnalise"},"Em An\xe1lise"),c.a.createElement(O,{value:"Encaminhadas"},"Encaminhadas"),c.a.createElement(O,{value:"Reagendadas"},"Reagendadas"),c.a.createElement(O,{value:"EmDeslocamento"},"Em Deslocamento"),c.a.createElement(O,{value:"Finalizadas"},"Finalizadas")),c.a.createElement(o.a,{placeholder:"Filtrar por t\xe9cnico",onChange:e=>V(e),style:{width:200,marginRight:10}},c.a.createElement(O,{value:""},"Todos os t\xe9cnicos"),X.map(e=>c.a.createElement(O,{key:e,value:e},e))),c.a.createElement(o.a,{placeholder:"Filtrar por assunto",value:G,onChange:e=>{Q(e),W(a=>({...a,subject:e}))},style:{width:200,marginRight:10}},c.a.createElement(O,{value:""},"Todos os assuntos"),Z.map(e=>c.a.createElement(O,{key:e,value:e},e))),c.a.createElement(m.a,{checked:ie,onChange:e=>de(e.target.checked),style:{marginRight:10}},"Padr\xe3o de Pesquisa?"),c.a.createElement(u.a,{type:"primary",onClick:()=>{ie&&localStorage.setItem("defaultSubject",G),W({status:H,technician:J,subject:G})}},"Aplicar Filtros")),c.a.createElement(r.a,{defaultActiveKey:"1",onChange:e=>{"6"===e&&(async()=>{F(!0);try{const a=await f.a.get("https://apidoixc.nexusnerds.com.br/Data/Ordens_Finalizadas.json");I(a.data),F(!1)}catch(e){l.a.error("Erro ao carregar os dados das ordens finalizadas."),F(!1)}})()}},c.a.createElement(v,{tab:c.a.createElement("span",null,"Em Execu\xe7\xe3o ",re&&c.a.createElement(b,{className:"blinking-tool-icon"})),key:"2"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(t),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:t.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Agendadas",key:"1"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(e),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:e.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Em Aberto",key:"3"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(E),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:E.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Em An\xe1lise",key:"4"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(p),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:p.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Encaminhadas",key:"5"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(y),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:y.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:c.a.createElement("span",null,"Em Deslocamento ",le&&c.a.createElement(j,{className:"blinking-car-icon"})),key:"8"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(A),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:A.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Reagendadas",key:"7"},c.a.createElement(i.a,{columns:Ee,dataSource:ge(_),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:_.length,onChange:ue,style:{marginTop:20,textAlign:"center"}})),c.a.createElement(v,{tab:"Finalizadas",key:"6"},c.a.createElement("div",null,c.a.createElement("h3",null,"Selecione o m\xeas:"),c.a.createElement(o.a,{onChange:e=>P(e),value:N,style:{width:200}},c.a.createElement(O,{value:""},"Selecione um m\xeas"),Object.keys(C).map(e=>c.a.createElement(O,{key:e,value:e},e)))),(()=>{if(R)return c.a.createElement(s.a,{size:"large",tip:"Carregando ordens finalizadas..."});if(!N)return c.a.createElement("p",null,"Selecione um m\xeas para visualizar as ordens finalizadas.");const e=C[N]||[];return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{columns:Ee,dataSource:ge(e),rowKey:"id_cliente",pagination:!1}),c.a.createElement(d.a,{current:K,pageSize:L,total:e.length,onChange:ue,style:{marginTop:20,textAlign:"center"}}))})())),c.a.createElement(u.a,{type:"primary",onClick:()=>(async e=>{te(!0),ce(60),localStorage.setItem("timeRemaining",60);try{await me(e),l.a.success("Comando executado com sucesso!")}catch(a){console.error("Erro ao executar o comando:",a),l.a.error("Erro ao executar o comando.")}})("node /api_ixc/dashboard/updateData.js && node /api_ixc/dashboard/analisarAssuntos.js && node /api_ixc/dashboard/gerarRelatorioChamados.js e node /api_ixc/dashboard/gerarOrdensPorStatus.js"),disabled:ae,icon:c.a.createElement(x.a,null),style:{marginTop:20}},ae?`Aguarde ${ne}s`:"Atualizar Lista"))})}}]);
//# sourceMappingURL=4.6f77dded.chunk.js.map