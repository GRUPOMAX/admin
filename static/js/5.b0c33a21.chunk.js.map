{"version":3,"sources":["pages/BairroChart.js","pages/AnaliseTecnicaDashboard.js"],"names":["BairroChart","_ref","data","length","React","createElement","ResponsiveContainer","width","height","BarChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","Bar","fill","AnaliseTecnicaDashboard","memo","statusData","setStatusData","useState","bairroData","setBairroData","isButtonDisabled","setIsButtonDisabled","timeRemaining","setTimeRemaining","navigate","useNavigate","console","log","window","innerWidth","innerHeight","useEffect","async","axios","get","contagem","error","fetchStatusData","formattedData","Object","entries","map","bairro","count","name","fetchBairroData","savedTimeRemaining","localStorage","getItem","parseInt","interval","setInterval","prevTime","newTime","setItem","clearInterval","removeItem","executeCommand","response","fetch","method","headers","Content-Type","body","JSON","stringify","comando","command","ok","Error","result","json","message","getCardStyle","type","backgroundColor","borderColor","color","className","Row","gutter","justify","Col","xs","sm","md","Card","title","bordered","style","undefined","online","offline","los","display","justifyContent","marginTop","Button","onClick","marginRight","success","disabled","icon","ReloadOutlined","textAlign","handleCustomCommand"],"mappings":"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","file":"static/js/5.b0c33a21.chunk.js","sourcesContent":["import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\n\r\nconst BairroChart = ({ data }) => {\r\n  if (!data || data.length === 0) {\r\n    return <p>Carregando dados...</p>;\r\n  }\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"70%\" height={400}>\r\n      <BarChart data={data} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis dataKey=\"name\" />\r\n        <YAxis />\r\n        <Tooltip />\r\n        <Bar dataKey=\"count\" fill=\"#006aff\" />\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default BairroChart;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Row, Col, Card, Button, message } from 'antd';\r\nimport { ReloadOutlined } from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport BairroChart from './BairroChart';\r\nimport './styles/AnaliseTecnicaDashboard.css';\r\n\r\nconst AnaliseTecnicaDashboard = React.memo(() => {\r\n  const [statusData, setStatusData] = useState({});\r\n  const [bairroData, setBairroData] = useState([]);\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(0);\r\n  const navigate = useNavigate();\r\n\r\n  console.log(`Largura: ${window.innerWidth}px, Altura: ${window.innerHeight}px`);\r\n\r\n  useEffect(() => {\r\n    const fetchStatusData = async () => {\r\n      try {\r\n        const { data } = await axios.get('https://apidoixc.nexusnerds.com.br/Data/Resultados_Status.json');\r\n        setStatusData(data.contagem);\r\n      } catch (error) {\r\n        console.error('Erro ao buscar os dados de status:', error);\r\n      }\r\n    };\r\n\r\n    const fetchBairroData = async () => {\r\n      try {\r\n        const { data } = await axios.get('https://apidoixc.nexusnerds.com.br/Data/Contagem_por_bairros.json');\r\n        const formattedData = Object.entries(data).map(([bairro, count]) => ({\r\n          name: bairro,\r\n          count,\r\n        }));\r\n        setBairroData(formattedData);\r\n      } catch (error) {\r\n        console.error('Erro ao buscar os dados de bairros:', error);\r\n      }\r\n    };\r\n\r\n    fetchStatusData();\r\n    fetchBairroData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const savedTimeRemaining = localStorage.getItem('timeRemaining');\r\n    if (savedTimeRemaining && savedTimeRemaining > 0) {\r\n      setTimeRemaining(parseInt(savedTimeRemaining, 10));\r\n      setIsButtonDisabled(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isButtonDisabled && timeRemaining > 0) {\r\n      const interval = setInterval(() => {\r\n        setTimeRemaining((prevTime) => {\r\n          const newTime = prevTime - 1;\r\n          localStorage.setItem('timeRemaining', newTime);\r\n\r\n          if (newTime <= 0) {\r\n            clearInterval(interval);\r\n            setIsButtonDisabled(false);\r\n            localStorage.removeItem('timeRemaining');\r\n          }\r\n\r\n          return newTime;\r\n        });\r\n      }, 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isButtonDisabled, timeRemaining]);\r\n\r\n  const handleButtonClick = async () => {\r\n    setIsButtonDisabled(true);\r\n    setTimeRemaining(180);\r\n    localStorage.setItem('timeRemaining', 180);\r\n\r\n    try {\r\n      await executeCommand('node /api_ixc/dashboard/Flashupdate.js && node /api_ixc/dashboard/ButtonUpdateData.js');\r\n      message.success('Comando executado com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao executar o comando:', error);\r\n      message.error('Erro ao executar o comando.');\r\n    }\r\n  };\r\n\r\n  const executeCommand = async (command) => {\r\n    try {\r\n      const response = await fetch('https://api.comand.nexusnerds.com.br/executar-comando', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ comando: command }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Erro ao executar o comando');\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(result);\r\n    } catch (error) {\r\n      console.error(`Erro de execução: ${error.message}`);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleCustomCommand = async (command) => {\r\n    setIsButtonDisabled(true);\r\n    setTimeRemaining(30);\r\n    localStorage.setItem('timeRemaining', 30);\r\n\r\n    try {\r\n      await executeCommand(command);\r\n      message.success('Comando executado com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao executar o comando:', error);\r\n      message.error('Erro ao executar o comando.');\r\n    }\r\n  };\r\n\r\n  const getCardStyle = (type) => {\r\n    switch (type) {\r\n      case 'online':\r\n        return { backgroundColor: '#d4edda', borderColor: '#c3e6cb', color: '#155724' };\r\n      case 'offline':\r\n        return { backgroundColor: '#ffa726', borderColor: '#fb8c00', color: '#bf360c' };\r\n      case 'los':\r\n        return { backgroundColor: '#f8d7da', borderColor: '#f5c6cb', color: '#721c24' };\r\n      default:\r\n        return {};\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <h2>Dashboard - Análise Técnica</h2>\r\n      <Row gutter={[16, 16]} justify=\"center\">\r\n        <Col xs={24} sm={12} md={8}>\r\n          <Card title=\"ONUs Online\" bordered={false} style={getCardStyle('online')}>\r\n            <p>{statusData.online !== undefined ? statusData.online : 'Carregando...'}</p>\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={8}>\r\n          <Card title=\"ONUs Desligadas\" bordered={false} style={getCardStyle('offline')}>\r\n            <p>{statusData.offline !== undefined ? statusData.offline : 'Carregando...'}</p>\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={8}>\r\n          <Card title=\"ONU (LOS)\" bordered={false} style={getCardStyle('los')}>\r\n            <p>{statusData.los !== undefined ? statusData.los : 'Carregando...'}</p>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"action-buttons\" style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '20px' }}>\r\n        <Button type=\"primary\" onClick={() => navigate('/home/detalhes-dispositivos')} style={{ marginRight: '10px' }}>\r\n          Análise Detalhada\r\n        </Button>\r\n        <Button type=\"primary\" onClick={handleButtonClick} disabled={isButtonDisabled} icon={<ReloadOutlined />}>\r\n          {isButtonDisabled ? `Aguarde ${timeRemaining}s` : ''}\r\n        </Button>\r\n      </div>\r\n      <div className=\"chart-container\">\r\n        <BairroChart data={bairroData} />\r\n      </div>\r\n      <div className=\"button-below-chart\" style={{ textAlign: 'center', marginTop: '20px' }}>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => handleCustomCommand('node /api_ixc/dashboard/updateData.js && node /api_ixc/dashboard/contarClientesPorBairro.js')}\r\n          disabled={isButtonDisabled}\r\n          icon={<ReloadOutlined />}\r\n        >\r\n          {isButtonDisabled ? '' : ''}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default AnaliseTecnicaDashboard;\r\n"],"sourceRoot":""}