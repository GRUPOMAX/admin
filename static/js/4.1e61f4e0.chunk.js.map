{"version":3,"sources":["../node_modules/file-saver/dist/FileSaver.min.js","pages/FinanceiroDashboard.js"],"names":["global","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","navigator","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","apply","__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","antd__WEBPACK_IMPORTED_MODULE_1__","antd__WEBPACK_IMPORTED_MODULE_2__","antd__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","antd__WEBPACK_IMPORTED_MODULE_5__","file_saver__WEBPACK_IMPORTED_MODULE_6__","xlsx__WEBPACK_IMPORTED_MODULE_7__","axios__WEBPACK_IMPORTED_MODULE_8__","Option","Select","FinanceiroDashboard","clientes","setClientes","useState","numeroDeClientesAtivos","setNumeroDeClientesAtivos","meses","setMeses","selectedMes","setSelectedMes","loading","setLoading","useEffect","async","clientesData","axios","get","resultadoData","data","uniqueMeses","Set","map","cliente","mes_ativacao","message","fetchData","columns","dataIndex","key","render","text","record","React","style","color","bloqueado","dateString","Date","toLocaleDateString","formatDate","filteredClientes","filter","quantidadeAtivacoes","length","className","placeholder","onChange","value","width","marginBottom","Spin","size","tip","Fragment","Table","dataSource","rowKey","pagination","pageSize","Button","onClick","exportToXLSX","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","excelBuffer","bookType","blob","marginTop"],"mappings":"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","file":"static/js/4.1e61f4e0.chunk.js","sourcesContent":["(function (a, b) {\n  if (\"function\" == typeof define && define.amd) define([], b);else if (\"undefined\" != typeof exports) b();else {\n    b(), a.FileSaver = {\n      exports: {}\n    }.exports;\n  }\n})(this, function () {\n  \"use strict\";\n\n  function b(a, b) {\n    return \"undefined\" == typeof b ? b = {\n      autoBom: !1\n    } : \"object\" != typeof b && (console.warn(\"Deprecated: Expected third argument to be a object\"), b = {\n      autoBom: !b\n    }), b.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type) ? new Blob([\"\\uFEFF\", a], {\n      type: a.type\n    }) : a;\n  }\n  function c(a, b, c) {\n    var d = new XMLHttpRequest();\n    d.open(\"GET\", a), d.responseType = \"blob\", d.onload = function () {\n      g(d.response, b, c);\n    }, d.onerror = function () {\n      console.error(\"could not download file\");\n    }, d.send();\n  }\n  function d(a) {\n    var b = new XMLHttpRequest();\n    b.open(\"HEAD\", a, !1);\n    try {\n      b.send();\n    } catch (a) {}\n    return 200 <= b.status && 299 >= b.status;\n  }\n  function e(a) {\n    try {\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    } catch (c) {\n      var b = document.createEvent(\"MouseEvents\");\n      b.initMouseEvent(\"click\", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), a.dispatchEvent(b);\n    }\n  }\n  var f = \"object\" == typeof window && window.window === window ? window : \"object\" == typeof self && self.self === self ? self : \"object\" == typeof global && global.global === global ? global : void 0,\n    a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent),\n    g = f.saveAs || (\"object\" != typeof window || window !== f ? function () {} : \"download\" in HTMLAnchorElement.prototype && !a ? function (b, g, h) {\n      var i = f.URL || f.webkitURL,\n        j = document.createElement(\"a\");\n      g = g || b.name || \"download\", j.download = g, j.rel = \"noopener\", \"string\" == typeof b ? (j.href = b, j.origin === location.origin ? e(j) : d(j.href) ? c(b, g, h) : e(j, j.target = \"_blank\")) : (j.href = i.createObjectURL(b), setTimeout(function () {\n        i.revokeObjectURL(j.href);\n      }, 4E4), setTimeout(function () {\n        e(j);\n      }, 0));\n    } : \"msSaveOrOpenBlob\" in navigator ? function (f, g, h) {\n      if (g = g || f.name || \"download\", \"string\" != typeof f) navigator.msSaveOrOpenBlob(b(f, h), g);else if (d(f)) c(f, g, h);else {\n        var i = document.createElement(\"a\");\n        i.href = f, i.target = \"_blank\", setTimeout(function () {\n          e(i);\n        });\n      }\n    } : function (b, d, e, g) {\n      if (g = g || open(\"\", \"_blank\"), g && (g.document.title = g.document.body.innerText = \"downloading...\"), \"string\" == typeof b) return c(b, d, e);\n      var h = \"application/octet-stream\" === b.type,\n        i = /constructor/i.test(f.HTMLElement) || f.safari,\n        j = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n      if ((j || h && i || a) && \"undefined\" != typeof FileReader) {\n        var k = new FileReader();\n        k.onloadend = function () {\n          var a = k.result;\n          a = j ? a : a.replace(/^data:[^;]*;/, \"data:attachment/file;\"), g ? g.location.href = a : location = a, g = null;\n        }, k.readAsDataURL(b);\n      } else {\n        var l = f.URL || f.webkitURL,\n          m = l.createObjectURL(b);\n        g ? g.location = m : location.href = m, g = null, setTimeout(function () {\n          l.revokeObjectURL(m);\n        }, 4E4);\n      }\n    });\n  f.saveAs = g.saveAs = g, \"undefined\" != typeof module && (module.exports = g);\n});","import React, { useEffect, useState } from 'react';\r\nimport { Table, Select, message, Spin, Button } from 'antd';\r\nimport { saveAs } from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport axios from 'axios';\r\nimport './styles/FinanceiroDashboard.css';\r\n\r\nconst { Option } = Select;\r\n\r\nconst FinanceiroDashboard = () => {\r\n  const [clientes, setClientes] = useState([]);\r\n  const [numeroDeClientesAtivos, setNumeroDeClientesAtivos] = useState(0);\r\n  const [meses, setMeses] = useState([]);\r\n  const [selectedMes, setSelectedMes] = useState('Neste Mês'); // Preseleciona \"Neste Mês\"\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Carregar dados dos clientes\r\n        const clientesData = await axios.get('https://apidoixc.nexusnerds.com.br/Data/Mês_AtivaçãoCliente.json');\r\n        const resultadoData = await axios.get('https://apidoixc.nexusnerds.com.br/Data/resultado.json');\r\n\r\n        setClientes(clientesData.data.clientes);\r\n        setNumeroDeClientesAtivos(resultadoData.data.numeroDeClientesAtivos);\r\n\r\n        // Extrair os meses únicos para o filtro\r\n        const uniqueMeses = [...new Set(clientesData.data.clientes.map(cliente => cliente.mes_ativacao))];\r\n        setMeses(uniqueMeses);\r\n\r\n        setLoading(false);\r\n      } catch (error) {\r\n        message.error('Erro ao carregar os dados do dashboard financeiro.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Função para exportar a tabela filtrada para XLSX\r\n  const exportToXLSX = () => {\r\n    const ws = XLSX.utils.json_to_sheet(filteredClientes); // Converte apenas os clientes filtrados para um sheet\r\n    const wb = XLSX.utils.book_new(); // Cria um novo workbook\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Clientes Filtrados'); // Adiciona o sheet ao workbook\r\n\r\n    // Converte o workbook para um arquivo binário e inicia o download\r\n    const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n    const blob = new Blob([excelBuffer], { type: 'application/octet-stream' });\r\n    saveAs(blob, `clientes_${selectedMes || 'todos_os_meses'}.xlsx`);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('pt-BR');\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Nome do Cliente',\r\n      dataIndex: 'nome_cliente',\r\n      key: 'nome_cliente',\r\n      render: (text, record) => (\r\n        <span style={{ color: record.bloqueado === 'Sim' ? 'red' : 'inherit' }}>\r\n          {text}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Data de Ativação',\r\n      dataIndex: 'data_ativacao',\r\n      key: 'data_ativacao',\r\n      render: (text, record) => (\r\n        <span style={{ color: record.bloqueado === 'Sim' ? 'red' : 'inherit' }}>\r\n          {formatDate(text)}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Mês de Ativação',\r\n      dataIndex: 'mes_ativacao',\r\n      key: 'mes_ativacao',\r\n    },\r\n    {\r\n      title: 'Bloqueado',\r\n      dataIndex: 'bloqueado',\r\n      key: 'bloqueado',\r\n      render: (text) => (\r\n        <span style={{ color: text === 'Sim' ? 'red' : 'inherit' }}>\r\n          {text}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Vendedor Responsável',\r\n      dataIndex: 'vendedor_responsavel',\r\n      key: 'vendedor_responsavel',\r\n      render: (text, record) => (\r\n        <span style={{ color: record.bloqueado === 'Sim' ? 'red' : 'inherit' }}>\r\n          {text}\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // Filtra os clientes com base no mês selecionado\r\n  const filteredClientes = clientes.filter(cliente => \r\n    selectedMes ? cliente.mes_ativacao === selectedMes : true\r\n  );\r\n\r\n  // Conta o número de ativações no mês selecionado ou em todos os meses\r\n  const quantidadeAtivacoes = filteredClientes.length;\r\n\r\n  return (\r\n    <div className=\"financeiro-dashboard-container\">\r\n      <h2>Dashboard Financeiro</h2>\r\n      <div className=\"info-container\">\r\n        <p>Total de Clientes Ativos: {numeroDeClientesAtivos}</p>\r\n        <p>\r\n          {selectedMes \r\n            ? `Ativações em ${selectedMes}: ${quantidadeAtivacoes}`\r\n            : `Ativações Totais: ${quantidadeAtivacoes}`}\r\n        </p>\r\n      </div>\r\n      <div className=\"filter-container\">\r\n        <Select\r\n          placeholder=\"Filtrar por mês de ativação\"\r\n          onChange={(value) => setSelectedMes(value)}\r\n          style={{ width: 200, marginBottom: 20 }}\r\n          value={selectedMes} // Pre-seleciona \"Neste Mês\"\r\n        >\r\n          <Option value=\"\">Todos os meses</Option>\r\n          <Option value=\"Mês Passado\">Mês Passado</Option>\r\n          <Option value=\"Neste Mês\">Neste Mês</Option>\r\n        </Select>\r\n      </div>\r\n      {loading ? (\r\n        <Spin size=\"large\" tip=\"Carregando dados...\" />\r\n      ) : (\r\n        <>\r\n          <Table\r\n            columns={columns}\r\n            dataSource={filteredClientes}\r\n            rowKey=\"nome_cliente\"\r\n            pagination={{ pageSize: 10 }}\r\n          />\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={exportToXLSX}\r\n            style={{ marginTop: 20 }}\r\n          >\r\n            Baixar XLSX\r\n          </Button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinanceiroDashboard;\r\n"],"sourceRoot":""}