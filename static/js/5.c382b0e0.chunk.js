(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{762:function(e,a,t){},777:function(e,a,t){"use strict";t.r(a);var o=t(0),r=t.n(o),n=t(294),c=t(284),s=t(285),l=t(297),i=t(56),d=t(767),m=t(16),u=t(288),p=t(770),b=t(775),E=t(771),g=t(760),h=t(761),f=t(766),y=t(528);var x=e=>{let{data:a}=e;return a&&0!==a.length?r.a.createElement(p.a,{width:"70%",height:400},r.a.createElement(b.a,{data:a,margin:{top:20,right:30,left:20,bottom:5}},r.a.createElement(E.a,{strokeDasharray:"3 3"}),r.a.createElement(g.a,{dataKey:"name"}),r.a.createElement(h.a,null),r.a.createElement(f.a,null),r.a.createElement(y.a,{dataKey:"count",fill:"#006aff"}))):r.a.createElement("p",null,"Carregando dados...")};t(762);const w=r.a.memo(()=>{const[e,a]=Object(o.useState)({}),[t,p]=Object(o.useState)([]),[b,E]=Object(o.useState)(!1),[g,h]=Object(o.useState)(0),f=Object(m.p)();console.log(`Largura: ${window.innerWidth}px, Altura: ${window.innerHeight}px`),Object(o.useEffect)(()=>{(async()=>{try{const{data:t}=await u.a.get("https://apidoixc.nexusnerds.com.br/Data/Resultados_Status.json");a(t.contagem)}catch(e){console.error("Erro ao buscar os dados de status:",e)}})(),(async()=>{try{const{data:a}=await u.a.get("https://apidoixc.nexusnerds.com.br/Data/Contagem_por_bairros.json"),t=Object.entries(a).map(e=>{let[a,t]=e;return{name:a,count:t}});p(t)}catch(e){console.error("Erro ao buscar os dados de bairros:",e)}})()},[]),Object(o.useEffect)(()=>{const e=localStorage.getItem("timeRemaining");e&&e>0&&(h(parseInt(e,10)),E(!0))},[]),Object(o.useEffect)(()=>{if(b&&g>0){const e=setInterval(()=>{h(a=>{const t=a-1;return localStorage.setItem("timeRemaining",t),t<=0&&(clearInterval(e),E(!1),localStorage.removeItem("timeRemaining")),t})},1e3);return()=>clearInterval(e)}},[b,g]);const y=async e=>{try{const t=await fetch("https://api.comand.nexusnerds.com.br/executar-comando",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comando:e})});if(!t.ok)throw new Error("Erro ao executar o comando");const o=await t.json();console.log(o)}catch(a){throw console.error(`Erro de execu\xe7\xe3o: ${a.message}`),a}},w=e=>{switch(e){case"online":return{backgroundColor:"#d4edda",borderColor:"#c3e6cb",color:"#155724"};case"offline":return{backgroundColor:"#ffa726",borderColor:"#fb8c00",color:"#bf360c"};case"los":return{backgroundColor:"#f8d7da",borderColor:"#f5c6cb",color:"#721c24"};default:return{}}};return r.a.createElement("div",{className:"dashboard-container"},r.a.createElement("h2",null,"Dashboard - An\xe1lise T\xe9cnica"),r.a.createElement(c.a,{gutter:[16,16],justify:"center"},r.a.createElement(s.a,{xs:24,sm:12,md:8},r.a.createElement(l.a,{title:"ONUs Online",bordered:!1,style:w("online")},r.a.createElement("p",null,void 0!==e.online?e.online:"Carregando..."))),r.a.createElement(s.a,{xs:24,sm:12,md:8},r.a.createElement(l.a,{title:"ONUs Desligadas",bordered:!1,style:w("offline")},r.a.createElement("p",null,void 0!==e.offline?e.offline:"Carregando..."))),r.a.createElement(s.a,{xs:24,sm:12,md:8},r.a.createElement(l.a,{title:"ONU (LOS)",bordered:!1,style:w("los")},r.a.createElement("p",null,void 0!==e.los?e.los:"Carregando...")))),r.a.createElement("div",{className:"action-buttons",style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"}},r.a.createElement(i.a,{type:"primary",onClick:()=>f("/home/detalhes-dispositivos"),style:{marginRight:"10px"}},"An\xe1lise Detalhada"),r.a.createElement(i.a,{type:"primary",onClick:async()=>{E(!0),h(180),localStorage.setItem("timeRemaining",180);try{await y("node /api_ixc/dashboard/Flashupdate.js && node /api_ixc/dashboard/ButtonUpdateData.js"),n.a.success("Comando executado com sucesso!")}catch(e){console.error("Erro ao executar o comando:",e),n.a.error("Erro ao executar o comando.")}},disabled:b,icon:r.a.createElement(d.a,null)},b?`Aguarde ${g}s`:"")),r.a.createElement("div",{className:"chart-container"},r.a.createElement(x,{data:t})),r.a.createElement("div",{className:"button-below-chart",style:{textAlign:"center",marginTop:"20px"}},r.a.createElement(i.a,{type:"primary",onClick:()=>(async e=>{E(!0),h(30),localStorage.setItem("timeRemaining",30);try{await y(e),n.a.success("Comando executado com sucesso!")}catch(a){console.error("Erro ao executar o comando:",a),n.a.error("Erro ao executar o comando.")}})("node /api_ixc/dashboard/updateData.js && node /api_ixc/dashboard/contarClientesPorBairro.js"),disabled:b,icon:r.a.createElement(d.a,null)},"")))});a.default=w}}]);
//# sourceMappingURL=5.c382b0e0.chunk.js.map