{"version":3,"sources":["../node_modules/file-saver/dist/FileSaver.min.js","pages/BloqueadosDashboardVIRTELECOM.js"],"names":["global","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","navigator","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","apply","__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","antd__WEBPACK_IMPORTED_MODULE_1__","antd__WEBPACK_IMPORTED_MODULE_2__","antd__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","_ant_design_icons__WEBPACK_IMPORTED_MODULE_5__","_ant_design_icons__WEBPACK_IMPORTED_MODULE_6__","axios__WEBPACK_IMPORTED_MODULE_7__","xlsx__WEBPACK_IMPORTED_MODULE_8__","file_saver__WEBPACK_IMPORTED_MODULE_9__","BloqueadosDashboardVIRTELECOM","data","setData","useState","loading","setLoading","total","setTotal","useEffect","async","clientes","axios","get","map","cliente","SITUACAO_CONTRATO","mapSituacao","length","message","fetchData","situacao","s2ab","s","buf","ArrayBuffer","view","Uint8Array","charCodeAt","columns","dataIndex","key","render","text","React","Button","icon","CopyOutlined","onClick","clipboard","writeText","then","success","catch","handleCopy","className","DownloadOutlined","exportToXLSX","filteredData","_ref","RAZAO_SOCIAL","CPF_CNPJ","ID_CONTRATO","DATA_INICIO","DIA_VENCIMENTO","telefone","Razão Social","CPF/CNPJ","Telefone","ws","XLSX","json_to_sheet","wb","book_new","sheet_add_aoa","sheet_add_json","skipHeader","book_append_sheet","wbout","bookType","blob","Spin","size","tip","Table","dataSource","rowKey"],"mappings":"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","file":"static/js/4.c7debb33.chunk.js","sourcesContent":["(function (a, b) {\n  if (\"function\" == typeof define && define.amd) define([], b);else if (\"undefined\" != typeof exports) b();else {\n    b(), a.FileSaver = {\n      exports: {}\n    }.exports;\n  }\n})(this, function () {\n  \"use strict\";\n\n  function b(a, b) {\n    return \"undefined\" == typeof b ? b = {\n      autoBom: !1\n    } : \"object\" != typeof b && (console.warn(\"Deprecated: Expected third argument to be a object\"), b = {\n      autoBom: !b\n    }), b.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type) ? new Blob([\"\\uFEFF\", a], {\n      type: a.type\n    }) : a;\n  }\n  function c(a, b, c) {\n    var d = new XMLHttpRequest();\n    d.open(\"GET\", a), d.responseType = \"blob\", d.onload = function () {\n      g(d.response, b, c);\n    }, d.onerror = function () {\n      console.error(\"could not download file\");\n    }, d.send();\n  }\n  function d(a) {\n    var b = new XMLHttpRequest();\n    b.open(\"HEAD\", a, !1);\n    try {\n      b.send();\n    } catch (a) {}\n    return 200 <= b.status && 299 >= b.status;\n  }\n  function e(a) {\n    try {\n      a.dispatchEvent(new MouseEvent(\"click\"));\n    } catch (c) {\n      var b = document.createEvent(\"MouseEvents\");\n      b.initMouseEvent(\"click\", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), a.dispatchEvent(b);\n    }\n  }\n  var f = \"object\" == typeof window && window.window === window ? window : \"object\" == typeof self && self.self === self ? self : \"object\" == typeof global && global.global === global ? global : void 0,\n    a = f.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent),\n    g = f.saveAs || (\"object\" != typeof window || window !== f ? function () {} : \"download\" in HTMLAnchorElement.prototype && !a ? function (b, g, h) {\n      var i = f.URL || f.webkitURL,\n        j = document.createElement(\"a\");\n      g = g || b.name || \"download\", j.download = g, j.rel = \"noopener\", \"string\" == typeof b ? (j.href = b, j.origin === location.origin ? e(j) : d(j.href) ? c(b, g, h) : e(j, j.target = \"_blank\")) : (j.href = i.createObjectURL(b), setTimeout(function () {\n        i.revokeObjectURL(j.href);\n      }, 4E4), setTimeout(function () {\n        e(j);\n      }, 0));\n    } : \"msSaveOrOpenBlob\" in navigator ? function (f, g, h) {\n      if (g = g || f.name || \"download\", \"string\" != typeof f) navigator.msSaveOrOpenBlob(b(f, h), g);else if (d(f)) c(f, g, h);else {\n        var i = document.createElement(\"a\");\n        i.href = f, i.target = \"_blank\", setTimeout(function () {\n          e(i);\n        });\n      }\n    } : function (b, d, e, g) {\n      if (g = g || open(\"\", \"_blank\"), g && (g.document.title = g.document.body.innerText = \"downloading...\"), \"string\" == typeof b) return c(b, d, e);\n      var h = \"application/octet-stream\" === b.type,\n        i = /constructor/i.test(f.HTMLElement) || f.safari,\n        j = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n      if ((j || h && i || a) && \"undefined\" != typeof FileReader) {\n        var k = new FileReader();\n        k.onloadend = function () {\n          var a = k.result;\n          a = j ? a : a.replace(/^data:[^;]*;/, \"data:attachment/file;\"), g ? g.location.href = a : location = a, g = null;\n        }, k.readAsDataURL(b);\n      } else {\n        var l = f.URL || f.webkitURL,\n          m = l.createObjectURL(b);\n        g ? g.location = m : location.href = m, g = null, setTimeout(function () {\n          l.revokeObjectURL(m);\n        }, 4E4);\n      }\n    });\n  f.saveAs = g.saveAs = g, \"undefined\" != typeof module && (module.exports = g);\n});","import React, { useEffect, useState } from 'react';\r\nimport { Table, Spin, message, Button } from 'antd';\r\nimport { CopyOutlined, DownloadOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport * as XLSX from 'xlsx';\r\nimport { saveAs } from 'file-saver';\r\nimport './styles/BloqueadosDashboardVIRTELECOM.css';\r\n\r\nconst BloqueadosDashboardVIRTELECOM = () => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get('https://apidoixc.nexusnerds.com.br/Data/clientes_bloqueados_atualizado.json');\r\n        const clientes = response.data.clientes.map(cliente => ({\r\n          ...cliente,\r\n          SITUACAO_CONTRATO: mapSituacao(cliente.SITUACAO_CONTRATO),\r\n        }));\r\n        setData(clientes);\r\n        setTotal(clientes.length); // Define o total de contratos\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Erro ao carregar dados:', error);\r\n        setLoading(false);\r\n        message.error('Erro ao carregar dados.');\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const mapSituacao = (situacao) => {\r\n    switch (situacao) {\r\n      case 'A':\r\n        return 'Ativo';\r\n      case 'C':\r\n        return 'Cancelado';\r\n      case 'B':\r\n        return 'Bloqueado';\r\n      case 'I':\r\n        return 'Inativo';\r\n      default:\r\n        return situacao;\r\n    }\r\n  };\r\n\r\n  const handleCopy = (text) => {\r\n    navigator.clipboard.writeText(text).then(() => {\r\n      message.success('Número copiado para a área de transferência!');\r\n    }).catch(() => {\r\n      message.error('Falha ao copiar o número.');\r\n    });\r\n  };\r\n\r\n  // Função para exportar os dados para XLSX\r\n  const exportToXLSX = () => {\r\n    // Filtrar campos indesejados e adicionar a \"Razão Social\"\r\n    const filteredData = data.map(({ RAZAO_SOCIAL, CPF_CNPJ, ID_CONTRATO, SITUACAO_CONTRATO, DATA_INICIO, DIA_VENCIMENTO, telefone }) => ({\r\n      'Razão Social': RAZAO_SOCIAL, // Inclui a coluna \"Razão Social\"\r\n      'CPF/CNPJ': CPF_CNPJ,\r\n      'Telefone': telefone,\r\n    }));\r\n\r\n    // Criar a planilha Excel\r\n    const ws = XLSX.utils.json_to_sheet(filteredData);\r\n    const wb = XLSX.utils.book_new();\r\n    \r\n    // Adicionar o título \"Bloqueados VIR TELECOM\"\r\n    XLSX.utils.sheet_add_aoa(ws, [['Bloqueados VIR TELECOM']], { origin: 'A1' });\r\n\r\n    // Mover os dados abaixo do título\r\n    XLSX.utils.sheet_add_json(ws, filteredData, { origin: 'A2', skipHeader: true });\r\n\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Bloqueados');\r\n\r\n    // Gerar o arquivo Excel e o baixar\r\n    const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'binary' });\r\n    const blob = new Blob([s2ab(wbout)], { type: 'application/octet-stream' });\r\n    saveAs(blob, 'bloqueados.xlsx');\r\n  };\r\n\r\n  const s2ab = (s) => {\r\n    const buf = new ArrayBuffer(s.length);\r\n    const view = new Uint8Array(buf);\r\n    for (let i = 0; i < s.length; i++) {\r\n      view[i] = s.charCodeAt(i) & 0xFF;\r\n    }\r\n    return buf;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Razão Social',\r\n      dataIndex: 'RAZAO_SOCIAL',\r\n      key: 'RAZAO_SOCIAL',\r\n    },\r\n    {\r\n      title: 'CPF/CNPJ',\r\n      dataIndex: 'CPF_CNPJ',\r\n      key: 'CPF_CNPJ',\r\n    },\r\n    {\r\n      title: 'ID Contrato',\r\n      dataIndex: 'ID_CONTRATO',\r\n      key: 'ID_CONTRATO',\r\n    },\r\n    {\r\n      title: 'Situação do Contrato',\r\n      dataIndex: 'SITUACAO_CONTRATO',\r\n      key: 'SITUACAO_CONTRATO',\r\n    },\r\n    {\r\n      title: 'Data Início',\r\n      dataIndex: 'DATA_INICIO',\r\n      key: 'DATA_INICIO',\r\n    },\r\n    {\r\n      title: 'Dia Vencimento',\r\n      dataIndex: 'DIA_VENCIMENTO',\r\n      key: 'DIA_VENCIMENTO',\r\n    },\r\n    {\r\n      title: 'Telefone',\r\n      dataIndex: 'telefone',\r\n      key: 'telefone',\r\n      render: (text) => (\r\n        <span>\r\n          {text} <Button type=\"link\" icon={<CopyOutlined />} onClick={() => handleCopy(text)} />\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bloqueados-dashboard-container\">\r\n      <h2>Dashboard - Bloqueados VIRTELECOM</h2>\r\n      <p>Total de Contratos Bloqueados: {total}</p>\r\n      <Button type=\"primary\" icon={<DownloadOutlined />} onClick={exportToXLSX}>\r\n        Baixar XLSX\r\n      </Button>\r\n      {loading ? (\r\n        <Spin size=\"large\" tip=\"Carregando dados...\" />\r\n      ) : (\r\n        <Table columns={columns} dataSource={data} rowKey=\"ID_CONTRATO\" />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BloqueadosDashboardVIRTELECOM;\r\n"],"sourceRoot":""}